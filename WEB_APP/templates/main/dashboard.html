<!DOCTYPE html>
<html lang="en">
<head>
    <title>Tablou de bord</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    {% load static %}
    {% load custom_filters %}

    <link rel="icon" type="image/png" href="{% static 'images/icons/favicon.ico' %}"/>
    <link rel="stylesheet" type="text/css" href="{% static 'vendor/bootstrap/css/bootstrap.min.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'fonts/font-awesome-4.7.0/css/font-awesome.min.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'css/util.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'css/main.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'css/dashboard.css' %}">
<style>
    /* NEW Background */
    body {
        margin: 0;
        padding: 0;
        background: linear-gradient(160deg, #0a0a0f 0%, #0d1b1e 40%, #001b1f 100%);
        color: #e0e0e0;
        font-family: 'Segoe UI', sans-serif;
        min-height: 100vh;
    }

    /* Extended Sidebar - full height & slick color */
    .sidebar {
        background: linear-gradient(to bottom, #10131a, #0a0e14 90%);
        height: 100vh;
        min-height: 100%;
        position: sticky;
        top: 0;
        box-shadow: inset -1px 0 0 #111;
        border-right: 1px solid rgba(0, 255, 255, 0.1);
    }

    .sidebar-menu a,
    .sidebar-title {
        color: #00ffe7;
    }

    .sidebar-menu a:hover {
        color: #ffffff;
    }

    /* Cyber-glass Navbar */
    .navbar-retro {
        width: 100%;
        background: rgba(0, 0, 0, 0.9);
        backdrop-filter: blur(8px);
        display: flex;
        justify-content: center;
        padding: 20px 0;
        border-bottom: 1px solid rgba(0, 255, 255, 0.15);
        box-shadow: 0 0 15px rgba(0, 255, 255, 0.05);
    }

    .navbar-retro a {
        color: #00fff7;
        margin: 0 40px;
        text-decoration: none;
        font-size: 1.2rem;
        font-weight: 600;
        transition: color 0.3s ease;
        letter-spacing: 0.5px;
    }

    .navbar-retro a:hover {
        color: #ffffff;
    }

    .main-content {
        padding: 40px 30px;
    }

    .sensor-card {
        background: rgba(18, 20, 28, 0.85);
        border-radius: 12px;
        border: 1px solid rgba(0, 255, 255, 0.2);
        box-shadow: 0 0 20px rgba(0, 255, 255, 0.08);
        transition: transform 0.2s ease;
    }

    .sensor-card:hover {
        transform: scale(1.01);
    }

    .btn-secondary {
        background-color: #00ffe7;
        border: none;
        color: #000;
        font-weight: bold;
        border-radius: 4px;
    }

    .btn-secondary:hover {
        background-color: #00cfc7;
    }

    .graph-container {
        display: flex;
        justify-content: space-between;
        gap: 20px;
        margin-top: 30px;
    }

    .graph-placeholder {
        width: 48%;
        height: 260px;
        background: rgba(0, 20, 30, 0.6);
        border: 1px solid #00fff7;
        border-radius: 10px;
        color: #00fff7;
        font-size: 1rem;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 0 20px rgba(0, 255, 255, 0.05);
    }

    .access-log-table {
        background: rgba(255, 255, 255, 0.03);
        border: 1px solid #00fff7;
        color: #ccc;
        margin-top: 40px;
        border-radius: 10px;
        overflow: hidden;
    }

    .access-log-table thead {
        background-color: rgba(0, 255, 255, 0.1);
        color: #00fff7;
    }

    .esp32-info-box {
        background: rgba(255, 255, 255, 0.05);
        padding: 15px;
        border-radius: 10px;
        margin-top: 20px;
        color: #00fff7;
        border: 1px solid #00fff7;
    }

    .esp32-info-box h5 {
        border-bottom: 1px solid #00fff7;
        padding-bottom: 5px;
    }

    .welcome-message {
        color: #ffffff;
        font-size: 2rem;
    }

    .section-title {
        color: #00fff7;
        font-weight: 600;
        margin-bottom: 20px;
    }

    table td, table th {
        font-size: 0.9rem;
    }

    /* Scrollbar (optional but ✨aesthetic) */
    ::-webkit-scrollbar {
        width: 8px;
    }

    ::-webkit-scrollbar-track {
        background: #0a0a0f;
    }

    ::-webkit-scrollbar-thumb {
        background: #00cfc7;
        border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb:hover {
        background: #00a6a2;
    }
</style>
</head>
<body>

    <!-- Neon Cyberpunk Navbar -->
    <nav class="navbar-retro">
        <a href="#">HOME</a>
        <a href="#">SYSLOG</a>
        <a href="#">TAGS REGISTER</a>
        <a href="#">ADMIN CONTROL</a>
        <a href="#">DEVICE</a>
    </nav>

    <div class="container-fluid dashboard-container">
        <div class="row">
            <!-- Sidebar -->
            <nav class="col-md-3 col-lg-2 d-md-block sidebar sidebar-navigation">
                <div class="sidebar-sticky">
                    <h4 class="text-center py-4 sidebar-title">Tablou de Bord</h4>
                    <ul class="nav flex-column sidebar-menu">
                        <li class="nav-item menu-item">
                            <a class="nav-link active menu-link" href="#"><i class="fa fa-home"></i> Acasă</a>
                        </li>
                        <li class="nav-item menu-item">
                            <a class="nav-link menu-link" href="#"><i class="fa fa-user"></i> Profil</a>
                        </li>
                        <li class="nav-item menu-item">
                            <a class="nav-link menu-link" href="#"><i class="fa fa-cog"></i> Setări</a>
                        </li>
                        <li class="nav-item menu-item">
                            <a class="nav-link menu-link" href="#"><i class="fa fa-sign-out"></i> Deconectare</a>
                        </li>
                        <li class="nav-item menu-item">
                            <div class="esp32-info-box">
                                <h5 class="text-center">ESP32 Info</h5>
                                <p><strong>IP:</strong> 192.168.0.50</p>
                                <p><strong>MAC:</strong> AA:BB:CC:DD:EE:FF</p>
                                <p><strong>Firmware:</strong> v1.3.7</p>
                                <p><strong>Status:</strong> Online</p>
                                <p><strong>Uptime:</strong> 4 days 6 hours</p>
                            </div>
                        </li>
                    </ul>
                </div>
            </nav>

            <!-- Main Content -->
            <main role="main" class="col-md-9 ml-sm-auto col-lg-10 px-md-4 main-content">
                <div class="pt-3 pb-2 mb-3 main-header">
                    <h1 class="welcome-message">Bun venit, {{ request.user.username }}</h1>
                </div>

                <!-- Door Control -->
                <h3 class="section-title mt-4">Control Ușă</h3>
                <div class="row mb-4">
                    <div class="col-md-12">
                        <div class="card sensor-card digital-card w-100">
                            <div class="card-body d-flex justify-content-between align-items-center">
                                <div>
                                    <h5 class="card-title">Ușa Principală</h5>
                                    <div class="lock-icon-container">
                                        <i class="fa fa-lock lock-icon lock-invisible"></i>
                                    </div>
                                </div>
                                <div>
                                    <button class="btn btn-secondary mx-2" onclick="sendDigitalCommand('door_1', 'high')">BLOCHEAZĂ</button>
                                    <button class="btn btn-secondary" onclick="sendDigitalCommand('door_1', 'low')">DEBLOCHEAZĂ</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Graphs Side by Side -->
                <div class="graph-container">
                    <div class="graph-placeholder">[ Temperatură vs Timp ]</div>
                    <div class="graph-placeholder">[ Stare Ușă vs Timp ]</div>
                </div>

                <!-- Access Log Table -->
                <h4 class="mt-5 section-title">Istoric Acces</h4>
                <table class="table table-striped table-bordered access-log-table">
                    <thead>
                        <tr>
                            <th>Server Time</th>
                            <th>ESP Time</th>
                            <th>IP</th>
                            <th>Host</th>
                            <th>Facility</th>
                            <th>Priority</th>
                            <th>Tag</th>
                            <th>Message</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>2025-11-24 12:45:00</td>
                            <td>2025-11-24 12:44:59</td>
                            <td>192.168.0.50</td>
                            <td>ESP32-Door</td>
                            <td>Local</td>
                            <td>Info</td>
                            <td>access</td>
                            <td>Door opened successfully</td>
                        </tr>
                        <tr>
                            <td colspan="8" style="text-align:center;">No more logs found.</td>
                        </tr>
                    </tbody>
                </table>
            </main>
        </div>
    </div>

    <!-- JS -->
    <script src="{% static 'vendor/jquery/jquery-3.2.1.min.js' %}"></script>
    <script src="{% static 'vendor/bootstrap/js/popper.js' %}"></script>
    <script src="{% static 'vendor/bootstrap/js/bootstrap.min.js' %}"></script>
    <script src="{% static 'js/dashboard.js' %}"></script>
</body>
</html>
